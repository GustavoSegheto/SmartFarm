<!DOCTYPE html>
<html lang="pt-BR">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartFarm - Dashboard da Lavoura</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <link rel="stylesheet" href="../css/Lavouras.css" />
  </head>

  <body>
    <nav class="sidenav">
      <a href="Lavouras.html" title="Plantações">
        <img src="../assets/ZLavouras2.webp" alt="Plantações"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
        <div class="icon-placeholder" style="display: none">ZL</div>
      </a>
      <a href="CadastroLavoura.html" title="Nova Lavoura">
        <img src="../assets/ZNovalavoura2.webp" alt="Nova Lavoura"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
        <div class="icon-placeholder" style="display: none">ZN</div>
      </a>
      <a href="Historico.html" title="Calendário">
        <img src="../assets/ZCalendario2.webp" alt="Calendário"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
        <div class="icon-placeholder" style="display: none">ZC</div>
      </a>
      <a href="Avisos.html" title="Alertas">
        <img src="../assets/ZAvisos2.webp" alt="Alertas"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
        <div class="icon-placeholder" style="display: none">ZA</div>
      </a>
      <a href="Cotas.html" title="Cotas">
        <img src="../assets/ZCifrao.png" alt="Cotas"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
        <div class="icon-placeholder" style="display: none">ZC</div>
      </a>
      <a href="marketplace.html" title="Estoque">
        <img src="../assets/ZMarketplace2.webp" alt="Estoque"
          onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
        <div class="icon-placeholder" style="display: none">ZM</div>
      </a>
    </nav>

    <nav class="topbar">
      <div class="container-fluid d-flex align-items-center justify-content-between">
        <h2 class="tituloprincipal m-0">
          <i class="fas fa-leaf"></i> LAVOURAS
        </h2>

        <!-- Área do usuário: começa oculta e é exibida via JS ao confirmar login -->
        <div id="usuario-area" class="dropdown d-none">
          <button class="btn btn-sm btn-outline-light dropdown-toggle d-flex align-items-center gap-2" type="button"
            id="usuarioMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-user-circle"></i>
            <span id="usuario-nome" class="fw-semibold">Usuário</span>
          </button>

          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="usuarioMenuButton">
            <li>
              <h6 class="dropdown-header">Conta</h6>
            </li> 
            <!-- Exemplo de item extra de conta; pode ser removido ou implementado depois -->
            <li>
              <button class="dropdown-item" type="button" disabled>
                Perfil (em breve)
              </button>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li>
              <button class="dropdown-item text-danger" type="button" id="btnLogout">
                Sair
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main class="content">
      <div class="container-fluid h-100">
        <div class="row h-50 mb-4">
          <div class="col-md-6 h-100">
            <section class="custom-card">
              <div class="subcardPizza">
                <div class="titulosnutrientes">
                  <h4 class="corNitrogenio">Nitrogênio</h4>
                  <h4 class="corFosforo">Fósforo</h4>
                  <h4 class="corPotassio">Potássio</h4>
                  <h4 class="corOutros">Outros</h4>
                </div>
                <div id="grafico-container">
                  <canvas id="graficoPizza"></canvas>
                </div>
              </div>
            </section>
          </div>

          <div class="col-md-6 h-100">
            <section class="custom-card">
              <div class="subcardTemp">
                <div class="temp-header">
                  <h1>Temperaturas da Semana</h1>
                  <p>Máximas e mínimas registradas</p>
                </div>
                <div class="temp-chart-container">
                  <canvas id="temperatureChart"></canvas>
                </div>
                <div class="temp-display">
                  <div class="temp-box">
                    <div class="temp-label">Temperatura máxima:</div>
                    <div class="temp-value max-temp" id="maxTempValue">
                      --°C
                    </div>
                  </div>
                  <div class="temp-box">
                    <div class="temp-label">Temperatura mínima:</div>
                    <div class="temp-value min-temp" id="minTempValue">
                      --°C
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>

        <div class="row h-50">
          <div class="col-md-6 h-100">
            <div class="row h-50 mb-3">
              <div class="col-12 h-100">
                <section class="custom-card">
                  <div class="row h-100">
                    <div class="col-md-6 h-100">
                      <div class="subcardvento">
                        <div class="sensor-title">
                          <i class="fas fa-wind sensor-icon"></i>
                          <h2>Vel. do vento:</h2>
                        </div>
                        <div id="velocimetro" class="gauge-container"></div>
                      </div>
                    </div>
                    <div class="col-md-6 h-100">
                      <div class="subcardumidsolo">
                        <div class="sensor-title">
                          <i class="fas fa-tint sensor-icon"></i>
                          <h2>
                            Umidade do Solo:
                            <span id="umidadeSoloValor">--%</span>
                          </h2>
                        </div>
                        <div id="umidsolo"></div>
                      </div>
                    </div>
                  </div>
                </section>
              </div>
            </div>

            <div class="row h-50">
              <div class="col-6 h-100">
                <section class="custom-card">
                  <div class="subcardAPI h-100">
                    <a href="apiimagem.html"><img src="../assets/APIIMAGEM.webp" alt="apiimagem" /></a>
                  </div>
                </section>
              </div>
              <div class="col-6 h-100">
                <section class="custom-card h-100 d-flex flex-column justify-content-between">
                  <div class="subcardPHSolo">
                    <div class="sensor-title">
                      <i class="fas fa-flask sensor-icon"></i>
                      <h2>Ph do solo: <span id="phSoloValor">--</span></h2>
                    </div>
                  </div>
                  <div class="subcardUmidAr">
                    <div class="sensor-title">
                      <i class="fas fa-cloud sensor-icon"></i>
                      <h2>
                        Umidade do ar: <span id="umidadeArValor">--%</span>
                      </h2>
                    </div>
                  </div>
                </section>
              </div>
            </div>
          </div>

          <div class="col-md-6 h-100">
            <section class="custom-card h-100">
              <div class="subcardAvisos">
                <h2><i class="fas fa-bell"></i> Avisos</h2>
                <div class="aviso amarelo">
                  <span>Alerta de geadas: tome as devidas precauções</span>
                  <span class="status amarelo"></span>
                </div>
                <div class="aviso">
                  <span>Colheita pronta: Batata</span>
                  <span class="status verde"></span>
                </div>
                <div class="aviso vermelho">
                  <span>Seca na Colheita: Batata</span>
                  <span class="status vermelho"></span>
                </div>
                <div class="aviso">
                  <span>Irrigação programada para amanhã</span>
                  <span class="status verde"></span>
                </div>
                <div class="aviso amarelo">
                  <span>Fertilização necessária em 3 dias</span>
                  <span class="status amarelo"></span>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </main>

    <div class="botoes-container">
      <button type="button" class="Botaoconclusao" id="btnConcluirLavoura">
        <i class="fas fa-check"></i> Concluir Lavoura
      </button>
      <button type="button" class="Botaoexcluir" id="btnExcluirLavoura">
        <i class="fas fa-trash-alt"></i> Excluir Lavoura
      </button>

      
  <div class="lavoura-selector">
    <select id="seletorLavouras">
      <option value="tomate"> Lavoura de Tomate</option>
      <option value="milho"> Lavoura de Milho</option>
      <option value="batata"> Lavoura de Batata</option>
    </select>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/justgage@1.6.1/justgage.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="../js/Lavouras.js" defer></script>
  </body>

</html>